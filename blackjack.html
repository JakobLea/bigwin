<!DOCTYPE html>
<html>

<head>
    <title>Blackjack Game</title>
    <link rel="stylesheet" href="bj.css">
    <link rel="stylesheet" href="nav.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh;
        }

        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #player,
        #dealer {
            display: flex;
            align-items: center;
            margin: 10px;
        }

        .hand {
            margin-right: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
        }

        .card-image {
            width: 100px;
            height: 150px;
            margin: 10px;
        }

        .counter {
            font-size: 24px;
        }
    </style>
</head>

<body style="background-color:#333333">
    <nav class="navbar">
        <a href="home.php" class="nav-branding"> <img style="border:0px solid black;" src="Logo/BigWin3.png"
                width=100px, height=50px></a>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="mines.php" class="nav-link">Mines</a>
            </li>
            <li class="nav-item">
                <a href="Penger.php" class="nav-link">Penger</a>
            </li>
            <li class="nav-item">
                <a href="blackjack.php" class="nav-link">Blackjack</a>
            </li>
            <li class="nav-item">
                <a href="Kontakt.html" class="nav-link">Kontakt</a>
            </li>
        </ul>
        <div class="login-container">
            <li class="nav-item">
                <div id="coinCount">

                </div>
            </li>

            <li class="nav-item">
                <a href="Login.html" class="nav-link">Login</a>
            </li>
        </div>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>


    <div id="container">
        <div id="game">
            <div id="player">
                <h2>Player's Hand:</h2>
                <div class="counter" id="player-counter"></div>
                <div id="player-hand" class="hand"></div>
            </div>
            <div id="dealer">
                <h2>Dealer's Hand:</h2>
                <div class="counter" id="dealer-counter"></div>
                <div id="dealer-hand" class="hand"></div>
            </div>
            <button id="deal-button">Deal</button>
            <button id="hit-button">Hit</button>
            <button id="stand-button">Stand</button>
        </div>
    </div>



    <script>
        const suits = ["Hearts", "Diamonds", "Clubs", "Spades"];
        const ranks = ["2", "3", "4", "5", "6", "7", "8", "9", "T", "J", "Q", "K", "A"];

        let deck = [];
        let playerHand = [];
        let dealerHand = [];

        const playerHandElement = document.getElementById("player-hand");
        const dealerHandElement = document.getElementById("dealer-hand");
        const playerCounterElement = document.getElementById("player-counter");
        const dealerCounterElement = document.getElementById("dealer-counter");
        const dealButton = document.getElementById("deal-button");
        const hitButton = document.getElementById("hit-button");
        const standButton = document.getElementById("stand-button");

        function createDeck() {
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit, rank });
                }
            }
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function dealInitialCards() {
            for (let i = 0; i < 2; i++) {
                playerHand.push(deck.pop());
                dealerHand.push(deck.pop());
            }
            renderHands();
            dealButton.disabled = true;
            hitButton.disabled = false;
            standButton.disabled = false;
        }

        function renderHands() {
            playerHandElement.innerHTML = playerHand.map(card => getCardImageURL(card)).join('');
            dealerHandElement.innerHTML = dealerHand.map(card => getCardImageURL(card)).join('');
            playerCounterElement.textContent = `Total: ${calculateHandValue(playerHand)}`;
            dealerCounterElement.textContent = `Total: ${calculateHandValue(dealerHand)}`;
        }

        function getCardImageURL(card) {
            const suitSymbol = getSuitSymbol(card.suit);
            const rankSymbol = getRankSymbol(card.rank);
            return `<img class="card-image" src="Cards/${rankSymbol}${suitSymbol}.png" alt="${card.rank} of ${card.suit}">`;
        }

        function getSuitSymbol(suit) {
            switch (suit) {
                case "Hearts":
                    return "H";
                case "Diamonds":
                    return "D";
                case "Clubs":
                    return "C";
                case "Spades":
                    return "S";
            }
        }

        function getRankSymbol(rank) {
            return rank === "10" ? "T" : rank;
        }

        function calculateHandValue(hand) {
            let value = 0;
            let hasAce = false;

            for (let card of hand) {
                if (card.rank === "A") {
                    hasAce = true;
                }
                if (card.rank === "K" || card.rank === "Q" || card.rank === "J") {
                    value += 10;
                } else if (card.rank === "A") {
                    value += 11;
                } else {
                    value += parseInt(card.rank);
                }
            }

            if (hasAce && value > 21) {
                value -= 10; // Convert one Ace from 11 to 1.
            }

            return value;
        }

        function checkBlackjack() {
            if (playerHand.length === 2 && calculateHandValue(playerHand) === 21) {
                alert("Blackjack! You win!");
                resetGame();
            } else if (dealerHand.length === 2 && calculateHandValue(dealerHand) === 21) {
                alert("Dealer has blackjack. You lose.");
                resetGame();
            }
        }

        function resetGame() {
            deck = [];
            playerHand = [];
            dealerHand = [];
            playerHandElement.innerHTML = "";
            dealerHandElement.innerHTML = "";
            dealButton.disabled = false;
            hitButton.disabled = true;
            standButton.disabled = true;
            createDeck();
            shuffleDeck();
        }

        dealButton.addEventListener("click", dealInitialCards);
        hitButton.addEventListener("click", () => {
            playerHand.push(deck.pop());
            renderHands();
            if (calculateHandValue(playerHand) > 21) {
                alert("Bust! You lose.");
                resetGame();
            }
        });
        standButton.addEventListener("click", () => {
            while (calculateHandValue(dealerHand) < 17) {
                dealerHand.push(deck.pop());
            }
            renderHands();

            if (calculateHandValue(dealerHand) > 21 || calculateHandValue(playerHand) > calculateHandValue(dealerHand)) {
                alert("You win!");
            } else if (calculateHandValue(playerHand) < calculateHandValue(dealerHand)) {
                alert("You lose.");
            } else {
                alert("It's a push!");
            }

            resetGame();
        });

        createDeck();
        shuffleDeck();
    </script>
</body>

</html>