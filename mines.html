<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="Logo/Favicon.png">
    <title>Mines Game</title>
    <link rel="stylesheet" href="mines.css">
    <link rel="stylesheet" href="/nav/nav.css">
</head>



<body style="background-color:#333333">

    <nav class="navbar">
        <a href="home.html" class="nav-branding"> <img style="border:0px solid black;" src="/Logo/BigWin3.png"
                width=100px, height=50px></a>

        <ul class="nav-menu">
            <li class="nav-item">
                <a href="Index.html" class="nav-link">Hjem</a>
            </li>
            <li class="nav-item">
                <a href="Tjenester.html" class="nav-link">Tjenester</a>
            </li>
            <li class="nav-item">
                <a href="Omoss.html" class="nav-link">Om oss</a>
            </li>
            <li class="nav-item">
                <a href="Kontakt.html" class="nav-link">Kontakt</a>
            </li>
        </ul>
        <div class="login-container">
            <li class="nav-item">
                <a href="Login.html" class="nav-link">Login</a>
            </li>
        </div>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>

    <div class="flex-container">

        <div class="selectbox">
            <div><label id="mineCountLabel" for="mineCount">Mines</label></div>
            <div> <p>Mines</p>
                <select id="mineCount">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3" selected>3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select></div>
            <div><button id="startButton">Start Game</button></div>
        </div>

        <div class="container" id="container"></div>
        <div></div>
    </div>
    <script>
        let gridSize = 5; // Updated to 5 rows and columns
        let numMines = 5; // Default number of mines
        let mines = [];
        let points = 0;

        function initializeGame() {
            gridSize = 5; // Reset the grid size
            document.getElementById("container").innerHTML = ""; // Clear the container

            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const cell = document.createElement("div");
                    cell.classList.add("cell");
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener("click", revealCell);
                    document.getElementById("container").appendChild(cell);
                }
            }

            // Validate the number of mines to ensure it's reasonable
            if (numMines >= gridSize * gridSize / 2) {
                alert("Too many mines! Please choose a lower number of mines.");
                return;
            }

            // Place mines randomly
            for (let i = 0; i < numMines; i++) {
                let row, col;
                do {
                    row = Math.floor(Math.random() * gridSize);
                    col = Math.floor(Math.random() * gridSize);
                } while (mines.some(mine => mine.row === row && mine.col === col));
                mines.push({ row, col });
            }
        }

        document.getElementById("startButton").addEventListener("click", () => {
            numMines = parseInt(document.getElementById("mineCount").value);
            initializeGame();
        });

        function revealCell(event) {
            const row = parseInt(event.target.dataset.row);
            const col = parseInt(event.target.dataset.col);

            if (event.target.classList.contains("revealed")) {
                // Cell is already revealed, do nothing
                return;
            }

            if (mines.some(mine => mine.row === row && mine.col === col)) {
                event.target.classList.add("mine");
                const mineImage = document.createElement("img");
                mineImage.src = "mine.png";
                mineImage.alt = "Mine";
                mineImage.classList.add("revealed");
                event.target.appendChild(mineImage);
                alert("Game Over! You hit a mine. Your score: " + points);
                resetGame();
            } else {
                event.target.classList.add("revealed");
                event.target.style.backgroundColor = "#000000"; // Change background color
                const safeImage = document.createElement("img");
                safeImage.src = "Logo/BW.png";
                safeImage.alt = "Safe";
                safeImage.classList.add("revealed");
                event.target.appendChild(safeImage);
                points++;

                if (points === gridSize * gridSize - numMines) {
                    alert("Congratulations! You've won! Your score: " + points);
                    resetGame();
                }
            }
        }

        function resetGame() {
            document.getElementById("container").innerHTML = "";
            mines = [];
            points = 0;
            initializeGame();
        }

        initializeGame();
    </script>


</body>

</html>